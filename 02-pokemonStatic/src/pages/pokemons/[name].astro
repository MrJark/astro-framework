---
import type { GetStaticPaths } from "astro";
import Main from "../../layouts/Main.astro";
import PokemonCard from "../../pokemon/PokemonCard.astro";

// Esto es para crear las rutas estáticas espsonalizdas.
// Los params en este caso son los fragmentos de url que son 'dinámicos' y las props son las que tiene el propio elemento
export const getStaticPaths = (() => {
  return [
    {
      params: { name: "bulbasaur" },
      props: { url: "https://pokeapi.co/api/v2/pokemon/1/" },
    },
    {
      params: { name: "charmander" },
      props: { url: "https://pokeapi.co/api/v2/pokemon/4/" },
    },
  ];
}) satisfies GetStaticPaths;

// con Astro.params puedes conseguir el nombre que has sacado en los getStaticPaths
const { name } = Astro.params;
const { url } = Astro.props; // de aquí también puedo sacar el name

const id = url.split("/").at(-2);
const audioSrc = `https://raw.githubusercontent.com/PokeAPI/cries/main/cries/pokemon/latest/${id}.ogg`;
---

<Main title="Pokemons Pages">
  <section class="flex flex-col justify-center items-center mt-10 mx-10">
    <h1 class="text-5xl capitalize">{name}</h1>
    <span class="text-xl text-slate-400">Its ID: {id}</span>
    <a href="/">Return</a>
    <PokemonCard name={name} url={`${url}`} />
    <audio controls class="mt-10">
      <source src={audioSrc} type="audio/ogg" />
      Your brawser does not support tha audio element
    </audio>
  </section>
</Main>
